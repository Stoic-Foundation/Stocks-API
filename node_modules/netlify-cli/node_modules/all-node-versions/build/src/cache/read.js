import{pathExists}from"path-exists";

import{
getCacheFile,
getCacheFileContent,
setCacheFileContent}from
"./file.js";









export const readCachedVersions=async function(fetchOpt){
if(fetchOpt===true){
return;
}

const cacheFile=await getCacheFile();

if(!(await pathExists(cacheFile))){
return;
}

const{versionsInfo,age}=await getCacheFileContent(cacheFile);

if(isOldCache(age,fetchOpt)){
return;
}

return versionsInfo;
};

const isOldCache=function(age,fetchOpt){
return age>MAX_AGE_MS&&fetchOpt!==false;
};


const MAX_AGE_MS=36e5;


export const writeCachedVersions=async function(versionsInfo){
const cacheFile=await getCacheFile();
await setCacheFileContent(cacheFile,versionsInfo);
};
//# sourceMappingURL=read.js.map