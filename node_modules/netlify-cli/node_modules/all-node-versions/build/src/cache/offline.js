import{readCachedVersions}from"./read.js";



export const handleOfflineError=async function(error){
if(!isOfflineError(error)){
throw error;
}

const cachedVersions=await readCachedVersions(false);

if(cachedVersions===undefined){
throw error;
}

return cachedVersions;
};




const isOfflineError=function({message}){
return OFFLINE_ERROR_MESSAGES.some((offlineErrorMessage)=>
message.includes(offlineErrorMessage));

};

const OFFLINE_ERROR_MESSAGES=["getaddrinfo","connect ECONNREFUSED"];
//# sourceMappingURL=offline.js.map